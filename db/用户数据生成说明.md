# 用户数据生成说明

## 概述

根据数据库表结构分析文档和现有用户数据格式，已生成20个测试用户的SQL插入语句。

## 生成的文件

- `generate_users.py` - 用户数据生成脚本
- `insert_20_users.sql` - 生成的SQL插入语句

## 数据特点

### 1. 用户ID
- 使用32位UUID格式（去掉横线）
- 例如：`0fe1676cfd0c4f8ca31387d007a010b4`

### 2. 用户信息
- **昵称**: 随机生成，格式为"前缀+后缀+数字"（如：阳光小123）
- **真实姓名**: 使用常见中文姓名，70%概率两个字，30%概率三个字
- **性别**: 随机分配（M:男, F:女）
- **出生日期**: 18-60岁之间随机生成

### 3. 联系方式
- **邮箱**: 格式为 `user001@域名.com`，确保唯一性
- **手机号**: 使用常见手机号段（130-139, 150-159, 180-189），确保唯一性

### 4. 密码
- **登录密码**: 统一为 `123456`，已使用BCrypt加密
- **加密格式**: `{bcrypt}$2a$10$AV9Xz.3ck4RsXiad5ArcBO5.ZKwlpcnJzs740BHY..fsSp0PnM/Zu`
- **支付密码**: 全部为NULL（未设置）

### 5. 时间信息
- **注册时间**: 2023-2024年之间随机生成
- **修改时间**: 与注册时间相同
- **最后登录时间**: 70%的用户有最后登录记录，在注册后1-90天内
- **注册IP**: 随机生成IP地址
- **最后登录IP**: 有登录记录的用户随机生成IP地址

### 6. 其他字段
- **头像**: 30%的用户有头像URL
- **积分**: 0-10000之间随机生成
- **状态**: 全部为1（正常状态）
- **备注**: 全部为NULL

## 使用方法

### 方法1：直接执行SQL文件

```bash
mysql -u用户名 -p数据库名 < insert_20_users.sql
```

### 方法2：在MySQL客户端中执行

```sql
source /path/to/insert_20_users.sql;
```

### 方法3：重新生成数据

如果需要重新生成不同数据的用户：

```bash
cd /root/cb/mall4j/db
python3 generate_users.py > insert_20_users.sql
```

## 数据验证

生成的数据满足以下约束：

1. ✅ **user_id**: 主键，32位UUID，唯一
2. ✅ **user_mail**: 唯一索引，所有邮箱不重复
3. ✅ **user_mobile**: 唯一索引，所有手机号不重复
4. ✅ **status**: 全部为1（正常状态）
5. ✅ **modify_time**: 与user_regtime相同
6. ✅ **user_lasttime**: 如果有值，必须在user_regtime之后

## 测试账号

所有生成的用户都可以使用以下信息登录：

- **密码**: `123456`
- **登录方式**: 
  - 使用昵称登录
  - 使用邮箱登录
  - 使用手机号登录

## 注意事项

1. **密码安全**: 生成的密码为测试密码，生产环境请修改
2. **数据唯一性**: 如果数据库中已存在相同的邮箱或手机号，插入会失败
3. **时间范围**: 注册时间在2023-2024年之间，部分用户的最后登录时间可能在2025年（这是正常的，表示用户注册后90天内登录）

## 数据统计

- 总用户数: 20
- 男性用户: 约50%
- 女性用户: 约50%
- 有头像用户: 约30%
- 有登录记录用户: 约70%
- 平均积分: 约6000分

## 示例用户

以下是几个示例用户：

| 用户ID | 昵称 | 真实姓名 | 邮箱 | 手机号 | 性别 | 积分 |
|--------|------|----------|------|--------|------|------|
| 0fe1676cfd0c4f8ca31387d007a010b4 | 活力老840 | 朱强平 | user001@qq.com | 15820172043 | M | 6823 |
| 799f8b6f960f4b38bcb64a3b8dff75b1 | 清新大535 | 周娜 | user002@gmail.com | 18178643235 | F | 9450 |
| 1b97d63283ae4075bc88e8fb831f691f | 山峰新922 | 王刚 | user003@foxmail.com | 15759715929 | F | 3338 |

## 后续操作建议

1. 执行SQL插入数据
2. 验证数据完整性
3. 测试用户登录功能
4. 根据需要创建用户地址、收藏等关联数据

